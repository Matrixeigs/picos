

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &mdash; picos 0.1.2 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="picos 0.1.2 documentation" href="index.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 


  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33037163-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  </script>



  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33037163-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  </script>



  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33037163-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  </script>



  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33037163-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  </script>

  </head>
<body><div class="admonition warning"><p class="first admonition-title">Warning</p><p class="last">You are consulting the doc of a former version of PICOS.The latest version is <a href="../index.html">HERE</a>. </p></div>    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PICOS</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial">
<span id="tuto"></span><h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>First of all, let us import the PICOS module and cvxopt</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">picos</span> <span class="kn">as</span> <span class="nn">pic</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">cvxopt</span> <span class="kn">as</span> <span class="nn">cvx</span>
</pre></div>
</div>
<p>We now generate some arbitrary data, that we will use in this tutorial.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span>        <span class="c">#a list of pairs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">(</span> <span class="p">[</span><span class="mi">0</span> <span class="p">,</span><span class="mi">2</span> <span class="p">,</span><span class="mi">0</span> <span class="p">,</span><span class="mi">3</span> <span class="p">],</span>                               <span class="c">#a tuple of 5 lists, each of length 4</span>
<span class="gp">... </span>      <span class="p">[</span><span class="mi">1</span> <span class="p">,</span><span class="mi">1</span> <span class="p">,</span><span class="mi">0</span> <span class="p">,</span><span class="mi">5</span> <span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span> <span class="p">,</span><span class="mi">2</span> <span class="p">,</span><span class="mi">4</span> <span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="mi">0</span> <span class="p">,</span><span class="mi">0</span> <span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="mi">1</span> <span class="p">,</span><span class="mi">1</span> <span class="p">,</span><span class="mi">0</span> <span class="p">,</span><span class="mi">0</span> <span class="p">]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cvx</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">5</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)))</span>     <span class="c">#A is a list of 2x4 matrices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;Peter&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s">&#39;Bob&#39;</span>  <span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s">&#39;Betty&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s">&#39;Elisa&#39;</span><span class="p">:</span> <span class="mi">14</span>
<span class="gp">... </span>   <span class="p">}</span>
</pre></div>
</div>
<p>Let us now create an instance P of an optimization problem</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">Problem</span><span class="p">()</span>    <span class="c">#create a Problem instance</span>
</pre></div>
</div>
<div class="section" id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h2>
<p>We will now create the variables of our optimization problem. This is done
by calling the method <a class="reference internal" href="problem.html#picos.Problem.add_variable" title="picos.Problem.add_variable"><tt class="xref py py-func docutils literal"><span class="pre">add_variable()</span></tt></a>.
This function adds an instance of the class <a class="reference internal" href="expression.html#picos.Variable" title="picos.Variable"><tt class="xref py py-class docutils literal"><span class="pre">Variable</span></tt></a>
in the dictionary <tt class="docutils literal"><span class="pre">prob.variables</span></tt>, and returns a reference
to the freshly added variable.
As we will next see, we
can use
this <a class="reference internal" href="expression.html#picos.Variable" title="picos.Variable"><tt class="xref py py-class docutils literal"><span class="pre">Variable</span></tt></a>
to form affine and quadratic expressions.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">prob</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c">#a scalar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">prob</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="c">#a column vector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">prob</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s">&#39;Y&#39;</span><span class="p">,(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span> <span class="c">#a matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">Z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">prob</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s">&#39;Z[{0}]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>  <span class="p">)</span><span class="c"># a list of 5 matrices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">=</span><span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">:</span>   <span class="c">#a dictionary of (scalar) binary variables, indexed by our pairs</span>
<span class="gp">... </span>    <span class="n">w</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">=</span> <span class="n">prob</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s">&#39;w[{0}]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="p">),</span><span class="mi">1</span> <span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="s">&#39;binary&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, if we try to display a variable, here is what we get:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="go"># variable w[(2, 4)]:(1 x 1),binary #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span>
<span class="go"># variable Y:(2 x 4),continuous #</span>
</pre></div>
</div>
<p>Also note the use of the
attributes <a class="reference internal" href="expression.html#picos.Variable.name" title="picos.Variable.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a>, <a class="reference internal" href="expression.html#picos.Variable.value" title="picos.Variable.value"><tt class="xref py py-attr docutils literal"><span class="pre">value</span></tt></a>,
<tt class="xref py py-attr docutils literal"><span class="pre">size</span></tt>, and <a class="reference internal" href="expression.html#picos.Variable.vtype" title="picos.Variable.vtype"><tt class="xref py py-attr docutils literal"><span class="pre">vtype</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">vtype</span>
<span class="go">&#39;binary&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">vtype</span>
<span class="go">&#39;continuous&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">vtype</span><span class="o">=</span><span class="s">&#39;integer&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go"># variable x:(4 x 1),integer #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">size</span>
<span class="go">(4, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_valued</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">is_valued</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;Z[2]&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="affine-expressions">
<h2>Affine Expressions<a class="headerlink" href="#affine-expressions" title="Permalink to this headline">¶</a></h2>
<p>We will now use our variables to create some affine expressions,
which are stored as instance of the class <a class="reference internal" href="expression.html#picos.AffinExp" title="picos.AffinExp"><tt class="xref py py-class docutils literal"><span class="pre">AffinExp</span></tt></a>,
and will be the
core to define an optimization problem. Most python operators have been overloaded
to work with instances of <a class="reference internal" href="expression.html#picos.AffinExp" title="picos.AffinExp"><tt class="xref py py-class docutils literal"><span class="pre">AffinExp</span></tt></a>
(a list of available overloaded operators can be found in the
doc of <a class="reference internal" href="expression.html#picos.AffinExp" title="picos.AffinExp"><tt class="xref py py-class docutils literal"><span class="pre">AffinExp</span></tt></a>). For example,
you can form the sum of two variables by writing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">Z</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="go"># (4 x 2)-affine expression: Z[0] + Z[3] #</span>
</pre></div>
</div>
<p>The transposition of an affine expression is done by appending <tt class="docutils literal"><span class="pre">.T</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go"># variable x:(4 x 1),integer #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">T</span>
<span class="go"># (1 x 4)-affine expression: x.T #</span>
</pre></div>
</div>
<div class="section" id="parameters-as-constant-affine-expressions">
<h3>Parameters as constant affine expressions<a class="headerlink" href="#parameters-as-constant-affine-expressions" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to form affine expressions by using parameters
stored in data structures such as a <tt class="docutils literal"><span class="pre">list</span></tt> or a <a class="reference external" href="http://abel.ee.ucla.edu/cvxopt/userguide/matrices.html#cvxopt.matrix" title="(in CVXOPT v1.1.1)"><tt class="xref py py-func docutils literal"><span class="pre">cvxopt</span> <span class="pre">matrix</span></tt></a>
(In fact, any type that is recognizable by the function <a class="reference internal" href="tools.html#picos.tools._retrieve_matrix" title="picos.tools._retrieve_matrix"><tt class="xref py py-func docutils literal"><span class="pre">_retrieve_matrix()</span></tt></a>).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go"># (4 x 1)-affine expression: x + [ 4 x 1 MAT ] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">T</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go"># (1 x 4)-affine expression: x.T + [ 1 x 4 MAT ] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">Z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">A</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="n">Z</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="go"># (2 x 2)-affine expression: [ 2 x 4 MAT ]*Z[0] + [ 2 x 4 MAT ]*Z[4] #</span>
</pre></div>
</div>
<p>In the above example, you see that the list <tt class="docutils literal"><span class="pre">b[0]</span></tt> was correctly converted into
a  <img class="math" src="_images/math/3e528443cd2fb44453e65fc68c74581129c4f80e.png" alt="4 \times 1"/> vector in the first expression, and into
a  <img class="math" src="_images/math/462a81c0c475a3b8892b62685e25198c7cb7dd22.png" alt="1 \times 4"/> vector in the second one. This is because the overloaded
operators always try to convert the data into matrices of the appropriate size.</p>
<p>If you want to have better-looking string representations of your affine expressions,
you will need to convert the parameters into constant affine expressions. This can be done
thanks to the function <a class="reference internal" href="tools.html#picos.tools.new_param" title="picos.tools.new_param"><tt class="xref py py-func docutils literal"><span class="pre">new_param()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">new_param</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="n">A</span><span class="p">)</span>              <span class="c">#this creates a list of constant affine expressions [A[0],...,A[4]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">new_param</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>              <span class="c">#this creates a list of constant affine expressions [b[0],...,b[4]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">new_param</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span><span class="n">D</span><span class="p">)</span>              <span class="c">#this creates a dictionary of constant AffExpr, indexed by &#39;Peter&#39;, &#39;Bob&#39;, ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alpha</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">new_param</span><span class="p">(</span><span class="s">&#39;alpha&#39;</span><span class="p">,</span><span class="mi">12</span><span class="p">)</span>     <span class="c">#a scalar parameter</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">alpha</span>
<span class="go"># (1 x 1)-affine expression: alpha #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span><span class="p">[</span><span class="s">&#39;Betty&#39;</span><span class="p">]</span>
<span class="go"># (1 x 1)-affine expression: D[Betty] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>                                         
<span class="go">[# (4 x 1)-affine expression: b[0] #,</span>
<span class="go"> # (4 x 1)-affine expression: b[1] #,</span>
<span class="go"> # (4 x 1)-affine expression: b[2] #,</span>
<span class="go"> # (4 x 1)-affine expression: b[3] #,</span>
<span class="go"> # (4 x 1)-affine expression: b[4] #]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[ 0.00e+00]</span>
<span class="go">[ 2.00e+00]</span>
<span class="go">[ 0.00e+00]</span>
<span class="go">[ 3.00e+00]</span>
</pre></div>
</div>
<p>The above example also illustrates that when a <em>valued</em> affine expression <tt class="docutils literal"><span class="pre">exp</span></tt> is printed,
it is its value that is displayed. For a non-valued affine expression, <strong>__repr__</strong>
and <strong>__str__</strong> produce the same result, a string of the form <tt class="docutils literal"><span class="pre">'#</span> <span class="pre">(size)-affine</span> <span class="pre">expression:</span> <span class="pre">string-representation</span> <span class="pre">#'</span></tt>.
Note that the constant affine expressions, as <tt class="docutils literal"><span class="pre">b[0]</span></tt> in the above example,
are always <em>valued</em>.
To assign a value to a non-constant <a class="reference internal" href="expression.html#picos.AffinExp" title="picos.AffinExp"><tt class="xref py py-class docutils literal"><span class="pre">AffinExp</span></tt></a>,
you must set the <tt class="xref py py-attr docutils literal"><span class="pre">value</span></tt> property of
every variable involved in the affine expression.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x_minus_1</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_minus_1</span>                           <span class="c">#note that 1 was recognized as the (4x1)-vector with all ones</span>
<span class="go"># (4 x 1)-affine expression: x -|1| #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">x_minus_1</span>
<span class="go"># (4 x 1)-affine expression: x -|1| #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_minus_1</span><span class="o">.</span><span class="n">is_valued</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_minus_1</span><span class="o">.</span><span class="n">is_valued</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">x_minus_1</span>
<span class="go">[-1.00e+00]</span>
<span class="go">[ 0.00e+00]</span>
<span class="go">[ 1.00e+00]</span>
<span class="go">[-2.00e+00]</span>
</pre></div>
</div>
<p>We also point out that <a class="reference internal" href="tools.html#picos.tools.new_param" title="picos.tools.new_param"><tt class="xref py py-func docutils literal"><span class="pre">new_param()</span></tt></a>
converts lists into vectors and lists of lists into matrices (given
in row major order).
In contrast, tuples are converted into list of affine expressions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">new_param</span><span class="p">(</span><span class="s">&#39;vect&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>                        <span class="c"># [1,2,3] is converted into a vector of dimension 3</span>
<span class="go"># (3 x 1)-affine expression: vect #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">new_param</span><span class="p">(</span><span class="s">&#39;mat&#39;</span><span class="p">,[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]])</span>               <span class="c"># [[1,2,3],[4,5,6]] is converted into a (2x3)-matrix</span>
<span class="go"># (2 x 3)-affine expression: mat #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">new_param</span><span class="p">(</span><span class="s">&#39;list_of_scalars&#39;</span><span class="p">,(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>             <span class="c"># (1,2,3) is converted into a list of 3 scalar parameters </span>
<span class="go">[# (1 x 1)-affine expression: list_of_scalars[0] #,</span>
<span class="go"> # (1 x 1)-affine expression: list_of_scalars[1] #,</span>
<span class="go"> # (1 x 1)-affine expression: list_of_scalars[2] #]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">new_param</span><span class="p">(</span><span class="s">&#39;list_of_vectors&#39;</span><span class="p">,([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]))</span>   <span class="c"># ([1,2,3],[4,5,6]) is converted into a list of 2 vector parameters </span>
<span class="go">[# (3 x 1)-affine expression: list_of_vectors[0] #,</span>
<span class="go"> # (3 x 1)-affine expression: list_of_vectors[1] #]</span>
</pre></div>
</div>
</div>
<div class="section" id="overloaded-operators">
<h3>Overloaded operators<a class="headerlink" href="#overloaded-operators" title="Permalink to this headline">¶</a></h3>
<p>OK, so now we have some variables (<tt class="docutils literal"><span class="pre">t</span></tt>, <tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">w</span></tt>, <tt class="docutils literal"><span class="pre">Y</span></tt>, and <tt class="docutils literal"><span class="pre">Z</span></tt>)
and some parameters (<tt class="docutils literal"><span class="pre">A</span></tt>, <tt class="docutils literal"><span class="pre">b</span></tt>, <tt class="docutils literal"><span class="pre">D</span></tt> and <tt class="docutils literal"><span class="pre">alpha</span></tt>). Let us create some
affine expressions with them.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">Z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                              <span class="c">#left multiplication</span>
<span class="go"># (2 x 2)-affine expression: A[0]*Z[0] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                              <span class="c">#right multiplication</span>
<span class="go"># (4 x 4)-affine expression: Z[0]*A[0] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">Z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>                       <span class="c">#left and right multiplication</span>
<span class="go"># (2 x 4)-affine expression: A[1]*Z[0]*A[2] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alpha</span><span class="o">*</span><span class="n">Y</span>                                  <span class="c">#scalar multiplication</span>
<span class="go"># (2 x 4)-affine expression: alpha*Y #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">/</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">D</span><span class="p">[</span><span class="s">&#39;Bob&#39;</span><span class="p">]</span>                     <span class="c">#division by a scalar and substraction</span>
<span class="go"># (1 x 1)-affine expression: t / b[1][3] -D[Bob] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span> <span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">x</span> <span class="p">)</span>                             <span class="c">#dot product</span>
<span class="go"># (1 x 1)-affine expression: 〈 b[2] | x 〉 #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span> <span class="n">A</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">Y</span> <span class="p">)</span>                             <span class="c">#generalized dot product for matrices: (A|B)=trace(A*B.T)</span>
<span class="go"># (1 x 1)-affine expression: 〈 A[3] | Y 〉 #</span>
</pre></div>
</div>
<p>We can also take some subelements of affine expressions, by using
the standard syntax of python slices:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>                                <span class="c">#2d and 3rd elements of b[1]</span>
<span class="go"># (2 x 1)-affine expression: b[1][1:3] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="p">[</span><span class="mi">1</span><span class="p">,:]</span>                                   <span class="c">#2d row of Y</span>
<span class="go"># (1 x 4)-affine expression: Y[1,:] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                                    <span class="c">#last element of x</span>
<span class="go"># (1 x 1)-affine expression: x[-1] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">][:,</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="n">Y</span><span class="p">[:,</span><span class="o">-</span><span class="mi">2</span><span class="p">::</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>                  <span class="c">#extended slicing with (negative) steps is allowed</span>
<span class="go"># (2 x 2)-affine expression: A[2][:,1:3]*( Y[:,-2::-2] ) #</span>
</pre></div>
</div>
<p>In the last example, we keep only the second and third columns of <tt class="docutils literal"><span class="pre">A[2]</span></tt>, and
the columns of <tt class="docutils literal"><span class="pre">Y</span></tt> with an even index, considered in the reverse order.
To concatenate affine expressions, the operators <tt class="docutils literal"><span class="pre">//</span></tt> and <tt class="docutils literal"><span class="pre">&amp;</span></tt> have been
overloaded:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">x</span> <span class="o">&amp;</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="o">//</span> <span class="n">x</span><span class="o">.</span><span class="n">T</span>                  <span class="c">#vertical (//) and horizontal (&amp;) concatenation</span>
<span class="go"># (5 x 4)-affine expression: [b[1],b[2],x,A[0].T*A[0]*x;x.T] #</span>
</pre></div>
</div>
<p>When a scalar is added/substracted to a matrix or a vector, we interprete it
as an elementwise addition of the scalar to every element of the matrix or vector.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="mi">5</span><span class="o">*</span><span class="n">x</span> <span class="o">-</span> <span class="n">alpha</span>
<span class="go"># (4 x 1)-affine expression: 5*x + |-alpha| #</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Note that the string representation <tt class="docutils literal"><span class="pre">'|-alpha|'</span></tt> does not stand for the
absolute value of <tt class="docutils literal"><span class="pre">-alpha</span></tt>, but for the vector whose all terms are <tt class="docutils literal"><span class="pre">-alpha</span></tt>.</p>
</div>
</div>
<div class="section" id="summing-affine-expressions">
<h3>Summing Affine Expressions<a class="headerlink" href="#summing-affine-expressions" title="Permalink to this headline">¶</a></h3>
<p>You can take the advantage of python syntax to create sums of affine expressions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">([</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="go"># (2 x 2)-affine expression: A[0]*Z[0] + A[1]*Z[1] + A[2]*Z[2] + A[3]*Z[3] + A[4]*Z[4] #</span>
</pre></div>
</div>
<p>This works, but you might have very long string representations if there are a lot
of summands. So you&#8217;d better use
the function <a class="reference internal" href="tools.html#picos.tools.sum" title="picos.tools.sum"><tt class="xref py py-func docutils literal"><span class="pre">picos.sum()</span></tt></a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)],</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="s">&#39;[5]&#39;</span><span class="p">)</span>
<span class="go"># (2 x 2)-affine expression: Σ_{i in [5]} A[i]*Z[i] #</span>
</pre></div>
</div>
<p>It is also possible to sum over several indices</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="o">*</span><span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)],[</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="s">&#39;j&#39;</span><span class="p">],</span><span class="s">&#39;[5]x[4]&#39;</span><span class="p">)</span>
<span class="go"># (1 x 2)-affine expression: Σ_{i,j in [5]x[4]} |A[i][1,j]| + b[j].T*Z[i] #</span>
</pre></div>
</div>
<p>A more complicated example, given in two variants: in the first one,
<tt class="docutils literal"><span class="pre">p</span></tt> is a tuple index representing a pair, while in the second case
we explicitely say that the pairs are of the form <tt class="docutils literal"><span class="pre">(p0,p1)</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">w</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">],(</span><span class="s">&#39;p&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="s">&#39;pairs&#39;</span><span class="p">)</span>
<span class="go"># (1 x 1)-affine expression: Σ_{p in pairs} w[p]*b[p__1-1][p__0] #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">w</span><span class="p">[</span><span class="n">p0</span><span class="p">,</span><span class="n">p1</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">p1</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">p0</span><span class="p">]</span> <span class="k">for</span> <span class="p">(</span><span class="n">p0</span><span class="p">,</span><span class="n">p1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">],[</span><span class="s">&#39;p0&#39;</span><span class="p">,</span><span class="s">&#39;p1&#39;</span><span class="p">],</span><span class="s">&#39;pairs&#39;</span><span class="p">)</span>
<span class="go"># (1 x 1)-affine expression: Σ_{p0,p1 in pairs} w[(p0, p1)]*b[p1-1][p0] #</span>
</pre></div>
</div>
<p>It is also possible to sum over string indices (<em>see the documentation of</em> <a class="reference internal" href="tools.html#picos.tools.sum" title="picos.tools.sum"><tt class="xref py py-func docutils literal"><span class="pre">sum()</span></tt></a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">D</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">D</span><span class="p">],</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="s">&#39;people_list&#39;</span><span class="p">)</span>
<span class="go"># (1 x 1)-affine expression: Σ_{name in people_list} D[name] #</span>
</pre></div>
</div>
</div>
<div class="section" id="objective-function">
<h3>Objective function<a class="headerlink" href="#objective-function" title="Permalink to this headline">¶</a></h3>
<p>The objective function of the problem
can be defined with the function
<a class="reference internal" href="problem.html#picos.Problem.set_objective" title="picos.Problem.set_objective"><tt class="xref py py-func docutils literal"><span class="pre">set_objective()</span></tt></a>.
Its first argument should be <tt class="docutils literal"><span class="pre">'max'</span></tt>, <tt class="docutils literal"><span class="pre">'min'</span></tt> or
<tt class="docutils literal"><span class="pre">'find'</span></tt> (<em>for feasibility problems</em>),
and the second argument should be a scalar expression:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="s">&#39;max&#39;</span><span class="p">,(</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="n">Y</span> <span class="p">)</span><span class="o">-</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">prob</span>  
<span class="go">---------------------</span>
<span class="go">optimization problem (MIP):</span>
<span class="go">59 variables, 0 affine constraints</span>

<span class="go">w   : dict of 6 variables, (1, 1), binary</span>
<span class="go">Z   : list of 5 variables, (4, 2), continuous</span>
<span class="go">t   : (1, 1), continuous</span>
<span class="go">Y   : (2, 4), continuous</span>
<span class="go">x   : (4, 1), integer</span>

<span class="go">    maximize 〈 A[0] | Y 〉 -t</span>
<span class="go">such that</span>
<span class="go">  []</span>
<span class="go">---------------------</span>
</pre></div>
</div>
<p>With this example, you see what happens when a problem is printed:
the list of optimization variables is displayed, then the objective function
and finally a list of constraints (in the case above, there is no constraint).</p>
</div>
</div>
<div class="section" id="norm-of-an-affine-expression">
<h2>Norm of an affine Expression<a class="headerlink" href="#norm-of-an-affine-expression" title="Permalink to this headline">¶</a></h2>
<p>The norm of an affine expression is an overload of the <tt class="docutils literal"><span class="pre">abs()</span></tt> function.
If <tt class="docutils literal"><span class="pre">x</span></tt> is an affine expression, <tt class="docutils literal"><span class="pre">abs(x)</span></tt> is its Euclidean norm <img class="math" src="_images/math/851db7deb83939dcd20d339dc327c33d825ccb8f.png" alt="\sqrt{x^T x}"/>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go"># norm of a (4 x 1)- expression: ||x|| #</span>
</pre></div>
</div>
<p>In the case where the affine expression is a matrix, <tt class="docutils literal"><span class="pre">abs()</span></tt> returns its
Frobenius norm, defined as <img class="math" src="_images/math/2fe6613e2dde4fecbf359c282aa4bc8483146b03.png" alt="\Vert M \Vert_F := \sqrt{\operatorname{trace} (M^T M)}"/>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">Z</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="go"># norm of a (4 x 2)- expression: ||Z[1] -2*A[0].T|| #</span>
</pre></div>
</div>
<p>Note that the absolute value of a scalar expression is stored as a norm:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go"># norm of a (1 x 1)- expression: ||t|| #</span>
</pre></div>
</div>
<p>However, a scalar constraint of the form <img class="math" src="_images/math/e7cfe28a2bf8ef5c58f5846c94770f9be1953302.png" alt="|a^T x + b| \leq c^T x + d"/>
is handled as two linear constraints by PICOS, and so a problem with the latter
constraint
can be solved even if you do not have a SOCP solver available.
Besides, note that the string representation of an absolute value uses the double bar notation.
(Recall that the single bar notation <tt class="docutils literal"><span class="pre">|t|</span></tt> is used to denote the vector
whose all values are <tt class="docutils literal"><span class="pre">t</span></tt>).</p>
</div>
<div class="section" id="quadratic-expressions">
<h2>Quadratic Expressions<a class="headerlink" href="#quadratic-expressions" title="Permalink to this headline">¶</a></h2>
<p>Quadratic expressions can be formed in several ways:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">t</span> <span class="o">-</span> <span class="n">alpha</span>                       <span class="c">#sum of linear and quadratic terms</span>
<span class="go">#quadratic expression: t**2 -x[1]*x[2] + 2.0*t -alpha #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">t</span><span class="o">+</span><span class="mi">4</span><span class="p">)</span>                                     <span class="c">#product of two affine expressions</span>
<span class="go">#quadratic expression: ( x[1] -2.0 )*( t + 4.0 ) #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">*</span><span class="n">x</span>                                             <span class="c">#Row vector multiplied by column vector</span>
<span class="go">#quadratic expression: Y[0,:]*x #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">x</span> <span class="o">+</span><span class="mi">2</span> <span class="o">|</span> <span class="n">Z</span><span class="p">[</span><span class="mi">1</span><span class="p">][:,</span><span class="mi">1</span><span class="p">])</span>                                   <span class="c">#scalar product of affine expressions</span>
<span class="go">#quadratic expression: 〈 x + |2.0| | Z[1][:,1] 〉 #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>                                            <span class="c">#recall that abs(x) is the euclidean norm of x</span>
<span class="go">#quadratic expression: ||x||**2 #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">t</span> <span class="o">&amp;</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span>                               <span class="c">#quadratic form</span>
<span class="go">#quadratic expression: [t,alpha]*A[1]*x #</span>
</pre></div>
</div>
<p>It is not possible (yet) to make a multidimensional quadratic expression.</p>
</div>
<div class="section" id="constraints">
<h2>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h2>
<p>A constraint takes the form of two expressions separated by a relation operator.</p>
<div class="section" id="linear-in-equalities">
<h3>Linear (in)equalities<a class="headerlink" href="#linear-in-equalities" title="Permalink to this headline">¶</a></h3>
<p>Linear (in)equalities are understood elementwise. <strong>The strict operators</strong>
<tt class="docutils literal"><span class="pre">&lt;</span></tt> <strong>and</strong> <tt class="docutils literal"><span class="pre">&gt;</span></tt> <strong>denote weak inequalities</strong> (<em>less or equal than</em>
and <em>larger or equal than</em>). For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">|</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span>                                                        <span class="c">#sum of the x[i] less or equal than 2</span>
<span class="go"># (1x1)-affine constraint: 〈 |1| | x 〉 &lt; 2.0 #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>                                        <span class="c">#A 4x4-elementwise inequality</span>
<span class="go"># (4x4)-affine constraint: Z[0]*A[0] &gt; b[1]*b[2].T #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)],</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="s">&#39;[5]&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>            <span class="c">#A 2x2 equality. The RHS is the all-zero matrix</span>
<span class="go"># (2x2)-affine constraint: Σ_{i in [5]} A[i]*Z[i] = |0| #</span>
</pre></div>
</div>
<p>Constraints can be added in the problem with the function
<a class="reference internal" href="problem.html#picos.Problem.add_constraint" title="picos.Problem.add_constraint"><tt class="xref py py-func docutils literal"><span class="pre">add_constraint()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>     <span class="n">prob</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">Y</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">prob</span>        
<span class="go">---------------------</span>
<span class="go">optimization problem (MIP):</span>
<span class="go">59 variables, 32 affine constraints</span>

<span class="go">w   : dict of 6 variables, (1, 1), binary</span>
<span class="go">Z   : list of 5 variables, (4, 2), continuous</span>
<span class="go">t   : (1, 1), continuous</span>
<span class="go">Y   : (2, 4), continuous</span>
<span class="go">x   : (4, 1), integer</span>

<span class="go">    maximize 〈 A[0] | Y 〉 -t</span>
<span class="go">such that</span>
<span class="go">  Z[1] = Z[0] + Y.T</span>
<span class="go">  Z[2] = Z[1] + Y.T</span>
<span class="go">  Z[3] = Z[2] + Y.T</span>
<span class="go">  Z[4] = Z[3] + Y.T</span>
<span class="go">---------------------</span>
</pre></div>
</div>
<p>The constraints of the problem can then be accessed with the function
<a class="reference internal" href="problem.html#picos.Problem.get_constraint" title="picos.Problem.get_constraint"><tt class="xref py py-func docutils literal"><span class="pre">get_constraint()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span><span class="o">.</span><span class="n">get_constraint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                      <span class="c">#constraints are numbered from 0</span>
<span class="go"># (4x2)-affine constraint: Z[3] = Z[2] + Y.T #</span>
</pre></div>
</div>
<p>An alternative is to pass the constraint with the option <tt class="docutils literal"><span class="pre">ret</span> <span class="pre">=</span> <span class="pre">True</span></tt>,
which has the effect to return a reference to the constraint you want to add.
In particular, this reference can be useful to access the optimal dual variable
of the constraint, once the problem will have been solved.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mycons</span> <span class="o">=</span> <span class="n">prob</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">Z</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="n">Z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">Y</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">ret</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">mycons</span>
<span class="go"># (4x2)-affine constraint : Z[4] + Z[0] = Y.T #</span>
</pre></div>
</div>
</div>
<div class="section" id="groupping-constraints">
<h3>Groupping constraints<a class="headerlink" href="#groupping-constraints" title="Permalink to this headline">¶</a></h3>
<p>In order to have a more compact string representation of the problem,
it is advised to use the function <a class="reference internal" href="problem.html#picos.Problem.add_list_of_constraints" title="picos.Problem.add_list_of_constraints"><tt class="xref py py-func docutils literal"><span class="pre">add_list_of_constraints()</span></tt></a>,
which works similarly as the function <a class="reference internal" href="tools.html#picos.tools.sum" title="picos.tools.sum"><tt class="xref py py-func docutils literal"><span class="pre">sum()</span></tt></a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span><span class="o">.</span><span class="n">remove_all_constraints</span><span class="p">()</span>                                                    <span class="c">#we first remove the 4 constraints precedently added</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">Y</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>                                                         <span class="c">#a single constraint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span><span class="o">.</span><span class="n">add_list_of_constraints</span><span class="p">([</span><span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">Y</span><span class="o">.</span><span class="n">T</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">)],</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="s">&#39;1...4&#39;</span><span class="p">)</span> <span class="c">#the same list of constraints as above</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">prob</span>    
<span class="go">---------------------</span>
<span class="go">optimization problem (MIP):</span>
<span class="go">59 variables, 40 affine constraints</span>

<span class="go">w   : dict of 6 variables, (1, 1), binary</span>
<span class="go">Z   : list of 5 variables, (4, 2), continuous</span>
<span class="go">t   : (1, 1), continuous</span>
<span class="go">Y   : (2, 4), continuous</span>
<span class="go">x   : (4, 1), integer</span>

<span class="go">    maximize 〈 A[0] | Y 〉 -t</span>
<span class="go">such that</span>
<span class="go">  Y &gt; |0|</span>
<span class="go">  Z[i] = Z[i-1] + Y.T for all i in 1...4</span>
<span class="go">---------------------</span>
</pre></div>
</div>
<p>Now, the constraint <tt class="docutils literal"><span class="pre">Z[3]</span> <span class="pre">=</span> <span class="pre">Z[2]</span> <span class="pre">+</span> <span class="pre">Y.T</span></tt>, which has been entered
in 4th position, can either be accessed by  <tt class="docutils literal"><span class="pre">prob.get_constraint(3)</span></tt> (<tt class="docutils literal"><span class="pre">3</span></tt> because
constraints are numbered from <tt class="docutils literal"><span class="pre">0</span></tt>), or by</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span><span class="o">.</span><span class="n">get_constraint</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="go"># (4x2)-affine constraint: Z[3] = Z[2] + Y.T #</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">(1,2)</span></tt> means <em>the 3rd constraint of the 2d group of constraints</em>,
with zero-based numbering.</p>
<p>Similarly, the constraint <tt class="docutils literal"><span class="pre">Y</span> <span class="pre">&gt;</span> <span class="pre">|0|</span></tt> can be accessed by
<tt class="docutils literal"><span class="pre">prob.get_constraint(0)</span></tt> (first constraint),
<tt class="docutils literal"><span class="pre">prob.get_constraint((0,0))</span></tt> (first constraint of the first group), or
<tt class="docutils literal"><span class="pre">prob.get_constraint((0,))</span></tt> (unique constraint of the first group).</p>
</div>
<div class="section" id="quadratic-constraints">
<h3>Quadratic constraints<a class="headerlink" href="#quadratic-constraints" title="Permalink to this headline">¶</a></h3>
<p>Quadratic inequalities are entered in the following way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">**</span><span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">t</span> <span class="o">-</span> <span class="n">alpha</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">#Quadratic constraint -t**2 + 2.0*t -alpha + x[1]*x[2] &lt; 0 #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">t</span> <span class="o">&amp;</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span><span class="mi">2</span> <span class="o">|</span> <span class="n">Z</span><span class="p">[</span><span class="mi">1</span><span class="p">][:,</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">|</span><span class="n">Y</span><span class="p">)</span><span class="o">-</span><span class="n">alpha</span>
<span class="go">#Quadratic constraint [t,alpha]*A[1]*x + 〈 x + |2.0| | Z[1][:,1] 〉 -(3.0*〈 |1| | Y 〉 -alpha) &lt; 0 #</span>
</pre></div>
</div>
<p>Note that PICOS does not check the convexity of convex constraints.
It is the solver which will raise an Exception if it does not support
non-convex quadratics.</p>
</div>
<div class="section" id="second-order-cone-constraints">
<h3>Second Order Cone Constraints<a class="headerlink" href="#second-order-cone-constraints" title="Permalink to this headline">¶</a></h3>
<p>There are two types of second order cone constraints supported in PICOS.</p>
<blockquote>
<div><ul class="simple">
<li>The constraints of the type <img class="math" src="_images/math/9efa656211538d43b003650cd82d3f54deee0aee.png" alt="\Vert x \Vert \leq t"/>, where <img class="math" src="_images/math/e0d2bf360290fd61d1c1557e763f2622363b3d35.png" alt="t"/>
is a scalar affine expression and <img class="math" src="_images/math/26eeb5258ca5099acf8fe96b2a1049c48c89a5e6.png" alt="x"/> is
a multidimensional affine expression (possibly a matrix, in which case the
norm is Frobenius). This inequality forces
the vector <img class="math" src="_images/math/41ad9ce57138aa3cb8f147af4cc31315436204d6.png" alt="[x;t]"/> to belong to a Lorrentz-Cone (also called
<em>ice-cream cone</em>)</li>
<li>The constraints of the type <img class="math" src="_images/math/851a8555eb17a0ef7f5176c07139a221d76fe070.png" alt="\Vert x \Vert^2 \leq t u,\ t \geq 0"/>, where
<img class="math" src="_images/math/e0d2bf360290fd61d1c1557e763f2622363b3d35.png" alt="t"/> and <img class="math" src="_images/math/9ad99798ec4c38e165cf517cb9e02b1c9e824103.png" alt="u"/> are scalar affine expressions and
<img class="math" src="_images/math/26eeb5258ca5099acf8fe96b2a1049c48c89a5e6.png" alt="x"/> is a multidimensional affine expression, which constrain
the vector <img class="math" src="_images/math/40a48e7758c43bdfe35de8dcc993bb7da1f1fbe1.png" alt="[x,t,u]"/> inside a rotated version of the Lorretz cone.
When a constraint of the form <tt class="docutils literal"><span class="pre">abs(x)**2</span> <span class="pre">&lt;</span> <span class="pre">t*u</span></tt> is passed to PICOS, <strong>it
is implicitely assumed that</strong> <tt class="docutils literal"><span class="pre">t</span></tt> <strong>is nonnegative</strong>, and the constraint is
handled as the equivalent, standard ice-cream cone constraint
<img class="math" src="_images/math/937e5860e38ca76557819086105006f324a844f0.png" alt="\Vert \ [2x,t-u]\  \Vert \leq t+u"/>.</li>
</ul>
</div></blockquote>
<p>A few examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">2</span><span class="o">|</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>                                                                  <span class="c">#A simple ice-cream cone constraint</span>
<span class="go"># (4x1)-SOC constraint: ||x|| &lt; 〈 |2.0| | x -|1| 〉 #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">Y</span><span class="o">+</span><span class="n">Z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">t</span><span class="o">+</span><span class="n">alpha</span>                                                           <span class="c">#SOC constraint with Frobenius norm</span>
<span class="go"># (2x4)-SOC constraint: ||Y + Z[0].T|| &lt; t + alpha #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">Z</span><span class="p">[</span><span class="mi">1</span><span class="p">][:,</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">t</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>                                      <span class="c">#Rotated SOC constraint</span>
<span class="go"># (4x1)-Rotated SOC constraint: ||Z[1][:,0]||^2 &lt; ( 2.0*t -alpha)( x[2] -(x[-1])) #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">**</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="n">D</span><span class="p">[</span><span class="s">&#39;Elisa&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">t</span>                                                               <span class="c">#t**2 is understood as the squared norm of [t]</span>
<span class="go"># (1x1)-Rotated SOC constraint: ||t||^2 &lt; D[Elisa] + t #</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>                                                             <span class="c">#1 is understood as the squared norm of [1]</span>
<span class="go"># (1x1)-Rotated SOC constraint: 1.0 &lt; ( t -1.0)( x[2] + x[3]) #</span>
</pre></div>
</div>
</div>
<div class="section" id="semidefinite-constraints">
<h3>Semidefinite Constraints<a class="headerlink" href="#semidefinite-constraints" title="Permalink to this headline">¶</a></h3>
<p>Linear matrix inequalities (LMI) can be entered thanks to an overload of the operators
<tt class="docutils literal"><span class="pre">&lt;&lt;</span></tt> and <tt class="docutils literal"><span class="pre">&gt;&gt;</span></tt>. For example, the LMI</p>
<div class="math">
<p><img src="_images/math/03044418633c182d8c1b7cb386ad3454b50b6238.png" alt="\begin{equation*}
\sum_{i=0}^3 x_i b_i b_i^T \succeq b_4 b_4^T,
\end{equation*}"/></p>
</div><p>where <img class="math" src="_images/math/db0f05af17a329d387f5234730350c6227d4ca0d.png" alt="\succeq"/> is used to denote the Löwner ordering,
is passed to PICOS by writing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">T</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)],</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="s">&#39;0...3&#39;</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
<span class="go"># (4x4)-LMI constraint Σ_{i in 0...3} x[i]*b[i]*b[i].T ≽ b[4]*b[4].T #</span>
</pre></div>
</div>
<p>Note the difference with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">T</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)],</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="s">&#39;0...3&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
<span class="go"># (4x4)-affine constraint: Σ_{i in 0...3} x[i]*b[i]*b[i].T &gt; b[4]*b[4].T #</span>
</pre></div>
</div>
<p>which yields an elementwise inequality.</p>
<p>For convenience, it is possible to add a symmetric matrix variable <tt class="docutils literal"><span class="pre">X</span></tt>,
by specifying the option <tt class="docutils literal"><span class="pre">vtype=symmetric</span></tt>. This has the effect to
store all the affine expressions which depend on <tt class="docutils literal"><span class="pre">X</span></tt> as a function
of its lower triangular elements only.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sdp</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">Problem</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">sdp</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s">&#39;X&#39;</span><span class="p">,(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">vtype</span><span class="o">=</span><span class="s">&#39;symmetric&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdp</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">X</span> <span class="o">&gt;&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">sdp</span>   
<span class="go">---------------------</span>
<span class="go">optimization problem (SDP):</span>
<span class="go">10 variables, 0 affine constraints, 10 vars in 1 SD cones</span>

<span class="go">X   : (4, 4), symmetric</span>

<span class="go">    find vars</span>
<span class="go">such that</span>
<span class="go">  X ≽ |0|</span>
<span class="go">---------------------</span>
</pre></div>
</div>
<p>In this example, you see indeed that the problem has 10=(4*5)/2 variables,
which correspond to the lower triangular elements of <tt class="docutils literal"><span class="pre">X</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When a constraint of the form <tt class="docutils literal"><span class="pre">A</span> <span class="pre">&gt;&gt;</span> <span class="pre">B</span></tt> is passed to PICOS, it is not
assumed that A-B is symmetric. Instead, the symmetric matrix whose lower
triangular elements are those of A-B is forced to be positive semidefnite.
So, in the cases where A-B is not implicitely forced to be symmetric, you
should add a constraint of the form <tt class="docutils literal"><span class="pre">A-B==(A-B).T</span></tt> in the problem.</p>
</div>
</div>
</div>
<div class="section" id="write-a-problem-to-a-file">
<h2>Write a Problem to a file<a class="headerlink" href="#write-a-problem-to-a-file" title="Permalink to this headline">¶</a></h2>
<p>It is possible to write a problem to a file, thanks to the
function <a class="reference internal" href="problem.html#picos.Problem.write_to_file" title="picos.Problem.write_to_file"><tt class="xref py py-func docutils literal"><span class="pre">write_to_file()</span></tt></a>.
Several file formats and file writers are available, have a look at the doc
of <a class="reference internal" href="problem.html#picos.Problem.write_to_file" title="picos.Problem.write_to_file"><tt class="xref py py-func docutils literal"><span class="pre">write_to_file()</span></tt></a> for more explanations.</p>
<p>Below is a <em>hello world</em> example, which writes a simple MIP to a <strong>.lp</strong> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">picos</span> <span class="kn">as</span> <span class="nn">pic</span>
<span class="n">prob</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">Problem</span><span class="p">()</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">prob</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="s">&#39;integer&#39;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">prob</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">prob</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">prob</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">x</span><span class="o">&gt;</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">prob</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="c">#let first picos display the problem</span>
<span class="k">print</span> <span class="n">prob</span>
<span class="k">print</span>
<span class="c">#now write the problem to a .lp file...</span>
<span class="n">prob</span><span class="o">.</span><span class="n">write_to_file</span><span class="p">(</span><span class="s">&#39;helloworld.lp&#39;</span><span class="p">)</span>
<span class="k">print</span>
<span class="c">#and display the content of the freshly created file:</span>
<span class="k">print</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;helloworld.lp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
<p>Generated output:</p>
<div class="highlight-none"><div class="highlight"><pre>---------------------
optimization problem  (MIP):
2 variables, 2 affine constraints

y   : (1, 1), integer
x   : (1, 1), continuous

        minimize y
such that
x &gt; 1.5
y -x &gt; 0.7
---------------------

writing problem in helloworld.lp...
done.

\* file helloworld.lp generated by picos*\
Minimize
obj : 1 y
Subject To
in0 : -1 y+ 1 x &lt;= -0.7
Bounds
y free
1.5 &lt;= x&lt;= +inf
Generals
y
Binaries
End
</pre></div>
</div>
</div>
<div class="section" id="solve-a-problem">
<h2>Solve a Problem<a class="headerlink" href="#solve-a-problem" title="Permalink to this headline">¶</a></h2>
<p>To solve a problem, you have to use the method <a class="reference internal" href="problem.html#picos.Problem.solve" title="picos.Problem.solve"><tt class="xref py py-func docutils literal"><span class="pre">solve()</span></tt></a>
of the class <a class="reference internal" href="problem.html#picos.Problem" title="picos.Problem"><tt class="xref py py-class docutils literal"><span class="pre">Problem</span></tt></a>. This method accepts several
options. In particular the solver can be specified by passing
an option of the form <tt class="docutils literal"><span class="pre">solver='solver_name'</span></tt>. For a list of available
parameters with their default values, see the doc of the function
<a class="reference internal" href="problem.html#picos.Problem.set_all_options_to_default" title="picos.Problem.set_all_options_to_default"><tt class="xref py py-func docutils literal"><span class="pre">set_all_options_to_default()</span></tt></a>.</p>
<p>Once a problem has been solved, the optimal values of the variables are
accessible with the <tt class="xref py py-attr docutils literal"><span class="pre">value</span></tt> property.
Depending on the solver, you
can also obtain the slack and the optimal dual variables
of the constraints thanks to the properties
<a class="reference internal" href="constraint.html#picos.Constraint.dual" title="picos.Constraint.dual"><tt class="xref py py-attr docutils literal"><span class="pre">dual</span></tt></a> and
<a class="reference internal" href="constraint.html#picos.Constraint.slack" title="picos.Constraint.slack"><tt class="xref py py-attr docutils literal"><span class="pre">slack</span></tt></a> of the class
<a class="reference internal" href="constraint.html#picos.Constraint" title="picos.Constraint"><tt class="xref py py-class docutils literal"><span class="pre">Constraint</span></tt></a>.
See the doc of <a class="reference internal" href="constraint.html#picos.Constraint.dual" title="picos.Constraint.dual"><tt class="xref py py-attr docutils literal"><span class="pre">dual</span></tt></a> for more explanations
on the dual variables for second order cone programs (SOCP) and
semidefinite programs (SDP).</p>
<p>The class <a class="reference internal" href="constraint.html#picos.Constraint" title="picos.Constraint"><tt class="xref py py-class docutils literal"><span class="pre">Problem</span></tt></a> also has
two interesting properties: <a class="reference internal" href="problem.html#picos.Problem.type" title="picos.Problem.type"><tt class="xref py py-attr docutils literal"><span class="pre">type</span></tt></a>, which
indicates the class of the optimization problem (&#8216;LP&#8217;, &#8216;SOCP&#8217;, &#8216;MIP&#8217;, &#8216;SDP&#8217;,...),
and <a class="reference internal" href="problem.html#picos.Problem.status" title="picos.Problem.status"><tt class="xref py py-attr docutils literal"><span class="pre">status</span></tt></a>, which indicates if the
problem has been solved (the default is <tt class="docutils literal"><span class="pre">'unsolved'</span></tt>; after a call to
<a class="reference internal" href="problem.html#picos.Problem.solve" title="picos.Problem.solve"><tt class="xref py py-func docutils literal"><span class="pre">solve()</span></tt></a> this property can take the value of any
code returned by a solver, such as <tt class="docutils literal"><span class="pre">'optimal'</span></tt>, <tt class="docutils literal"><span class="pre">'unbounded'</span></tt>, <tt class="docutils literal"><span class="pre">'near-optimal'</span></tt>,
<tt class="docutils literal"><span class="pre">'primal</span> <span class="pre">infeasible'</span></tt>, <tt class="docutils literal"><span class="pre">'unknown'</span></tt>, ...).</p>
<p>Below is a simple example, to solve the linear programm:</p>
<div class="math">
<p><img src="_images/math/9be73110dd697dda15a0b60207da2a10dd912b29.png" alt="\begin{center}
$\begin{array}{ccc}
\underset{x \in \mathbb{R}^2}{\mbox{minimize}}
                   &amp; 0.5 x_1 + x_2 &amp;\\
\mbox{subject to} &amp; x_1 &amp;\geq x_2\\
                  &amp; \left[
                     \begin{array}{cc}
                     1 &amp; 0\\
                     1 &amp; 1
                     \end{array}
                     \right] x &amp;\leq
                     \left[
                     \begin{array}{c} 3 \\4 \end{array}
                     \right].
\end{array}$
\end{center}"/></p>
</div><p>More examples can be found <a class="reference internal" href="examples.html#examples"><em>here</em></a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">P</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">Problem</span><span class="p">()</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">new_param</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">cvx</span><span class="o">.</span><span class="n">matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span> <span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">P</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">P</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">A</span><span class="o">*</span><span class="n">x</span><span class="o">&lt;</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">objective</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">P</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="s">&#39;max&#39;</span><span class="p">,</span> <span class="n">objective</span><span class="p">)</span>

<span class="c">#display the problem and solve it</span>
<span class="k">print</span> <span class="n">P</span>
<span class="k">print</span> <span class="s">&#39;type:   &#39;</span><span class="o">+</span><span class="n">P</span><span class="o">.</span><span class="n">type</span>
<span class="k">print</span> <span class="s">&#39;status: &#39;</span><span class="o">+</span><span class="n">P</span><span class="o">.</span><span class="n">status</span>
<span class="n">P</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="s">&#39;cvxopt&#39;</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;status: &#39;</span><span class="o">+</span><span class="n">P</span><span class="o">.</span><span class="n">status</span>

<span class="c">#--------------------#</span>
<span class="c">#  objective value   #</span>
<span class="c">#--------------------#</span>

<span class="k">print</span> <span class="s">&#39;the optimal value of this problem is:&#39;</span>
<span class="k">print</span> <span class="n">P</span><span class="o">.</span><span class="n">obj_value</span><span class="p">()</span>                      <span class="c">#&quot;print objective&quot; would also work, because objective is valued</span>

<span class="c">#--------------------#</span>
<span class="c">#  optimal variable  #</span>
<span class="c">#--------------------#</span>
<span class="n">x_opt</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span>
<span class="k">print</span> <span class="s">&#39;The solution of the problem is:&#39;</span>
<span class="k">print</span> <span class="n">x_opt</span>                              <span class="c">#&quot;print x&quot; would also work, since x is now valued</span>
<span class="k">print</span>

<span class="c">#--------------------#</span>
<span class="c">#  slacks and duals  #</span>
<span class="c">#--------------------#</span>
<span class="n">c0</span><span class="o">=</span><span class="n">P</span><span class="o">.</span><span class="n">get_constraint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;The dual of the constraint&#39;</span>
<span class="k">print</span> <span class="n">c0</span>
<span class="k">print</span> <span class="s">&#39;is:&#39;</span>
<span class="k">print</span> <span class="n">c0</span><span class="o">.</span><span class="n">dual</span>
<span class="k">print</span> <span class="s">&#39;And its slack is:&#39;</span>
<span class="k">print</span> <span class="n">c0</span><span class="o">.</span><span class="n">slack</span>
<span class="k">print</span>

<span class="n">c1</span><span class="o">=</span><span class="n">P</span><span class="o">.</span><span class="n">get_constraint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;The dual of the constraint&#39;</span>
<span class="k">print</span> <span class="n">c1</span>
<span class="k">print</span> <span class="s">&#39;is:&#39;</span>
<span class="k">print</span> <span class="n">c1</span><span class="o">.</span><span class="n">dual</span>
<span class="k">print</span> <span class="s">&#39;And its slack is:&#39;</span>
<span class="k">print</span> <span class="n">c1</span><span class="o">.</span><span class="n">slack</span>
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre>---------------------
optimization problem  (LP):
2 variables, 3 affine constraints

x   : (2, 1), continuous

    maximize 0.5*x[0] + x[1]
such that
  x[0] &gt; x[1]
  A*x &lt; [ 2 x 1 MAT ]
---------------------
type:   LP
status: unsolved
status: optimal

the optimal value of this problem is:
3.0000000002
The solution of the problem is:
[ 2.00e+00]
[ 2.00e+00]


The dual of the constraint
# (1x1)-affine constraint : x[0] &gt; x[1] #
is:
[ 2.50e-01]

And its slack is:
[ 1.83e-09]


The dual of the constraint
# (2x1)-affine constraint : A*x &lt; [ 2 x 1 MAT ] #
is:
[ 4.56e-10]
[ 7.50e-01]

And its slack is:
[ 1.00e+00]
[-8.71e-10]
</pre></div>
</div>
<div class="section" id="a-note-on-dual-variables">
<span id="noteduals"></span><h3>A note on dual variables<a class="headerlink" href="#a-note-on-dual-variables" title="Permalink to this headline">¶</a></h3>
<p>For second order cone constraints of the form <img class="math" src="_images/math/40dea4d11c0fe8c6eb5352c1aa4394df6e8b7721.png" alt="\Vert \mathbf{x} \Vert \leq t"/>,
where <img class="math" src="_images/math/5f61118f2ae912f86e683687c005145b5eb54aec.png" alt="\mathbf{x}"/> is a vector of dimension <img class="math" src="_images/math/174fadd07fd54c9afe288e96558c92e0c1da733a.png" alt="n"/>,
the dual variable is a vector of dimension <img class="math" src="_images/math/0e3efd9b14723a92c2ae891fe27780d5f8e2b215.png" alt="n+1"/> of the form
<img class="math" src="_images/math/50f162c5895311f243c71121b337f944bea06166.png" alt="[\lambda; \mathbf{z}]"/>, where the <img class="math" src="_images/math/f51a24c13c63bde268c9288806ec1f21ad6d3ca7.png" alt="n-"/> dimensional vector
<img class="math" src="_images/math/fdfd9b84e32a56f39b510b1cec00a0363b46cacd.png" alt="\mathbf{z}"/> satisfies <img class="math" src="_images/math/9a263201f4384113169f71374051e2c33a53cfe0.png" alt="\Vert \mathbf{z} \Vert \leq \lambda"/>.</p>
<p>Since <em>rotated</em> second order cone constraints of the form
<img class="math" src="_images/math/3878477f1e6eb287541ab8147b063578fb9a70ed.png" alt="\Vert \mathbf{x} \Vert^2 \leq t u,\ t \geq 0"/>,
are handled as the equivalent ice-cream constraint
<img class="math" src="_images/math/d0834965759561404c7bf0e14362825441373003.png" alt="\Vert [2 \mathbf{x}; t-u ] \Vert \leq t+u"/>,
the dual is given with respect to this reformulated, standard SOC constraint.</p>
<p>In general, a linear problem with second order cone constraints (both standard and rotated)
and semidefinite constraints can be written under the form:</p>
<div class="math">
<p><img src="_images/math/ebcca5d699966d2799d6dd335140b5ab842fe7c0.png" alt="\begin{center}
$\begin{array}{cclc}
\underset{\mathbf{x} \in \mathbb{R}^n}{\mbox{minimize}}
                   &amp; \mathbf{c}^T \mathbf{x} &amp; &amp;\\
\mbox{subject to} &amp; A^e \mathbf{x} + \mathbf{b^e} &amp; = 0 &amp;\\
                  &amp; A^l \mathbf{x} + \mathbf{b^l} &amp; \leq 0 &amp;\\
                  &amp; \Vert A^s_i \mathbf{x} + \mathbf{b^s_i} \Vert &amp;\leq \mathbf{f^s_i}^T \mathbf{x} +d^s_i, &amp; \forall i \in I\\
                  &amp; \Vert A^r_j \mathbf{x} + \mathbf{b^r_j} \Vert^2 &amp;\leq (\mathbf{f^{r_1}_j}^T \mathbf{x} +d^{r_1}_j) (\mathbf{f^{r_2}_j}^T \mathbf{x} +d^{r_2}_j), &amp; \forall j \in J\\
                  &amp; 0        &amp; \leq \mathbf{f^{r_1}_j}^T \mathbf{x} +d^{r_1}_j, &amp; \forall j \in J\\
                  &amp; \sum_{i=1}^n x_i M_i &amp; \succeq M_0
\end{array}$
\end{center}"/></p>
</div><p>where</p>
<blockquote>
<div><ul class="simple">
<li><img class="math" src="_images/math/c66c5a193225934366307245d6bbcaaa86f16a72.png" alt="\mathbf{c}, \big\{\mathbf{f^s_i}\big\}_{i\in I}, \big\{\mathbf{f^{r_1}_j}\big\}_{j \in J}, \big\{\mathbf{f^{r_2}_j}\big\}_{j \in J}"/>
are vectors of dimension <img class="math" src="_images/math/174fadd07fd54c9afe288e96558c92e0c1da733a.png" alt="n"/>;</li>
<li><img class="math" src="_images/math/d16f8a26fe54b2ef2cf9b682eb70f854b27ca16d.png" alt="\big\{d^s_i\big\}_{i \in I}, \big\{d^{r_1}_j\big\}_{j \in J}, \big\{d^{r_2}_j\big\}_{j \in J}"/>
are scalars;</li>
<li><img class="math" src="_images/math/4a104de5008bdafad2137f95bc4b841e6016d269.png" alt="\big\{\mathbf{b^s_i}\big\}_{i\in I}"/> are vectors of dimension <img class="math" src="_images/math/b883af5aa0d7577400222ee2fff56b9fa2e7c4b9.png" alt="n^s_i"/> and
<img class="math" src="_images/math/b457d014d0d6a4169ddc98340c7a56ca4de788dc.png" alt="\big\{A^s_i\big\}_{i\in I}"/> are matrices of size <img class="math" src="_images/math/3487bcb0a8f4c79304b4cccfca01ae4b74096f76.png" alt="n^s_i \times n"/>;</li>
<li><img class="math" src="_images/math/76dc0ec8b06a04d12c70eccf5a33c27588f4085f.png" alt="\big\{\mathbf{b^r_j}\big\}_{j\in J}"/> are vectors of dimension <img class="math" src="_images/math/52b52345302de88c57d78b05c107817c76739aa3.png" alt="n^r_j"/> and
<img class="math" src="_images/math/b52fc22395808d801cdfd3119c311a8522f7ec2d.png" alt="\big\{A^r_j\big\}_{j\in J}"/> are matrices of size <img class="math" src="_images/math/fea68d0936bf53e57bdb3d020d9f6c90ef9b3e73.png" alt="n^r_j \times n"/>;</li>
<li><img class="math" src="_images/math/51621617a5071920561ee54ed8b1e4ff9c5f002f.png" alt="\mathbf{b^e}"/> is a vector of dimension <img class="math" src="_images/math/39fe567d85dc7608ff0ff44e0ff2c6ebb9977383.png" alt="n^e"/> and
<img class="math" src="_images/math/97f765207ca35ed15a641f558e88bdea6ae1d5c8.png" alt="A^e"/> is a matrix of size <img class="math" src="_images/math/77eba4d6a9461a4dfdecb60b12e0472ec136f9fa.png" alt="n^e \times n"/>;</li>
<li><img class="math" src="_images/math/ac01350aa90bc253863c1af006cf90d9f78ebe18.png" alt="\mathbf{b^l}"/> is a vector of dimension <img class="math" src="_images/math/9a47645bd95da6a56799cdd214807f5d7e0dff87.png" alt="n^l"/> and
<img class="math" src="_images/math/b1cfdae4b04a25b200affbabf0645f7ce0f82b0b.png" alt="A^l"/> is a matrix of size <img class="math" src="_images/math/ead8235623e7b545256d14519b7833be36893bd5.png" alt="n^l \times n"/>;</li>
<li><img class="math" src="_images/math/2fc88b027cd234e0ccfc8411682cd96ef11b3a42.png" alt="\big\{M_k\big\}_{k=0,\ldots,n}"/> are <img class="math" src="_images/math/e75357f2d8c8407da3c37e1fa3524fbe8490e3f1.png" alt="m \times m"/> symmetric
matrices (<img class="math" src="_images/math/733721fc85744f4af6765cb0e95c647dd3a8ef63.png" alt="M_k \in :math:"/>mathbb{S}_m`).</li>
</ul>
</div></blockquote>
<p>Its dual problem can be written as:</p>
<div class="math">
<p><img src="_images/math/fcb9664a20601be22db0ad1cb371b509ebff2243.png" alt="\begin{center}
$\begin{array}{cll}
\mbox{maximize}   &amp; \mathbf{b^e}^T \mathbf{\mu^e}
                    + \mathbf{b^l}^T \mathbf{\mu^l} &amp;
                    + \sum_{i\in I} \big( \mathbf{b^s_i}^T \mathbf{z^s_i} - d^s_i \lambda_i \big)
                    + \sum_{j\in J} \big( \mathbf{b^r_j}^T \mathbf{z^r_j} - d^{r_1}_j \alpha_j - d^{r_2}_j \beta_j \big)
                    + \langle M_0, X \rangle\\
\mbox{subject to} &amp; c + {A^e}^T \mathbf{\mu^e} + {A^l}^T \mathbf{\mu^l} &amp;
                      + \sum_{i\in I} \big( {A^s_i}^T \mathbf{z^s_i} -\lambda_i \mathbf{f^s_i} \big)
                      + \sum_{j\in J} \big( {A^r_j}^T \mathbf{z^r_j} -\alpha_j \mathbf{f^{r_1}_j} - \beta_j \mathbf{f^{r_2}_j} \big)
                     = \mathcal{M} \bullet X \\
                  &amp; \mu_l \geq 0 &amp;\\
                  &amp; \Vert \mathbf{z^s_i} \Vert \leq \lambda_i, &amp;\forall i \in I\\
                  &amp; \Vert \mathbf{z^r_j} \Vert^2 \leq 4 \alpha_j \beta_j, &amp;\forall j \in J\\
                  &amp; \ \ 0 \ \ \ \leq \alpha_j, &amp;\forall j \in J\\
                  &amp; X \succeq 0
\end{array}$
\end{center}"/></p>
</div><p>where <img class="math" src="_images/math/605f4fa582c70cccd626a1f0184c68685bf971fc.png" alt="\mathcal{M} \bullet X"/> stands for the vector of dimension <img class="math" src="_images/math/174fadd07fd54c9afe288e96558c92e0c1da733a.png" alt="n"/>
with <img class="math" src="_images/math/407286c30c0232a6973389c8717b6d95df5e0cdd.png" alt="\langle M_i, X \rangle"/> on the <img class="math" src="_images/math/34857b3ba74ce5cd8607f3ebd23e9015908ada71.png" alt="i"/> th coordinate, and the dual variables
are</p>
<blockquote>
<div><ul class="simple">
<li><img class="math" src="_images/math/292cbf21f8069205bbbbd13a0c5fc44ac0b0fe45.png" alt="\mu^e \in \mathbb{R}^{n_e}"/></li>
<li><img class="math" src="_images/math/1da5689d11201e2ea7327bdf00fd4a6958d6f147.png" alt="\mu^l \in \mathbb{R}^{n_l}"/></li>
<li><img class="math" src="_images/math/3fd6a0125d04e7128be4f0662fc8a3f8b6904fdc.png" alt="z^s_i \in \mathbb{R}^{n^s_i},\ \forall i \in I"/></li>
<li><img class="math" src="_images/math/f06fb5af37e4ee7d45df1f7c06a5deab4257132f.png" alt="\lambda_i \in \mathbb{R},\ \forall i \in I"/></li>
<li><img class="math" src="_images/math/187b5d05e3a3837f0959d2eea18ac55cfd037a9d.png" alt="z^r_j \in \mathbb{R}^{n^r_j},\ \forall j \in J"/></li>
<li><img class="math" src="_images/math/c250b4d2ec0642123804c34d741ee35231312e4e.png" alt="(\alpha_j,\beta_j) \in \mathbb{R}^2,\ \forall j \in J"/></li>
<li><img class="math" src="_images/math/d30df074a22c99e349f9be2236a936494992f5d1.png" alt="X \in \mathbb{S}_m"/></li>
</ul>
</div></blockquote>
<p>When quering the dual of a constraint of the above primal problem, <strong>picos will
return</strong></p>
<blockquote>
<div><ul>
<li><p class="first"><img class="math" src="_images/math/c8892b371e22398d57f229c1d9bc5bc3de909048.png" alt="\mu^e"/> for the constraint <img class="math" src="_images/math/e39fe8c9cf97d1f7fa0d52599ad08114d980ae5f.png" alt="A^e \mathbf{x} + \mathbf{b^e} = 0"/>;</p>
</li>
<li><p class="first"><img class="math" src="_images/math/46cf6c10d12c3ac5308405380a2289e49c88f2bd.png" alt="\mu^l"/> for the constraint <img class="math" src="_images/math/847e2894f3593071d0c02bca82bf37524344ec47.png" alt="A^l \mathbf{x} + \mathbf{b^l} \geq 0"/>;</p>
</li>
<li><p class="first">The <img class="math" src="_images/math/a07af1da8d222c26180a0175b913edeb030b853d.png" alt="(n^s_i+1)-"/> dimensional vector <img class="math" src="_images/math/582482956cfa0e430a52950573fa02b290bae124.png" alt="\mu^s_i\ :=\ [\lambda_i;\mathbf{z^s_i}]\"/> for the constraint</p>
<blockquote>
<div><p><img class="math" src="_images/math/c6b2f43441214d134d814f5448be8c738793aabd.png" alt="\Vert A^s_i \mathbf{x} + \mathbf{b^s_i} \Vert \leq \mathbf{f^s_i}^T \mathbf{x} +d^s_i"/>;</p>
</div></blockquote>
</li>
<li><p class="first">The <img class="math" src="_images/math/a2e1f607b77ff710116e7d69a6c91d0439b5d168.png" alt="(n^r_j+2)-"/> dimensional vector <img class="math" src="_images/math/ccfba7df4c9cc750aea40eaf35e606a7eb09a181.png" alt="\mu^r_j\:=\ \frac{1}{2}[\ (\beta_j+\alpha_j) ;\ \mathbf{z^r_j} ;\ (\beta_j-\alpha_j)\ ]\"/> for the constraint</p>
<blockquote>
<div><p><img class="math" src="_images/math/2dd49662787421a2ae15602912ef190a43785091.png" alt="\Vert A^r_j \mathbf{x} + \mathbf{b^r_j} \Vert^2 \leq (\mathbf{f^{r_1}_j}^T \mathbf{x} +d^{r_1}_j) (\mathbf{f^{r_2}_j}^T \mathbf{x} +d^{r_2}_j)"/></p>
</div></blockquote>
<p>In other words, if the dual vector returned by picos is of the form
<img class="math" src="_images/math/947d6d029cf8dc6c1b828da4e6e880ea71de0488.png" alt="\mu^r_j\ = [\sigma^1_j;\mathbf{u_j};\sigma^2_j]"/>, where <img class="math" src="_images/math/b6410d309724a0a863dbc72243945d720376d7cf.png" alt="\mathbf{u_j}"/> is of dimension <img class="math" src="_images/math/52b52345302de88c57d78b05c107817c76739aa3.png" alt="n^r_j"/>,
then the dual variables of the rotated conic constraint
are <img class="math" src="_images/math/9e594c9879b30f4daeb4e64fd7d6c01fb81b2045.png" alt="\alpha_j = \sigma^1_j - \sigma^2_j,\ \beta_j = \sigma^1_j + \sigma^2_j"/>
and <img class="math" src="_images/math/756e52cb9954c54da144c18c1fb06e231d87aa3f.png" alt="\mathbf{z^r_j} = 2 \mathbf{u_j}"/>;</p>
</li>
<li><p class="first">The symmetric positive definite matrix <img class="math" src="_images/math/6a47ca0fe7cb276abc022af6ac88ddae1a9d6894.png" alt="X"/> for the constraint</p>
<blockquote>
<div><p><img class="math" src="_images/math/e7baca06eeb8ee3250e3466e1f418f720684099c.png" alt="\sum_{i=1}^n x_i M_i \succeq M_0"/>.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#affine-expressions">Affine Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#norm-of-an-affine-expression">Norm of an affine Expression</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quadratic-expressions">Quadratic Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constraints">Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#write-a-problem-to-a-file">Write a Problem to a file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solve-a-problem">Solve a Problem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">The PICOS API</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
</ul>

  <h3><a href="index.html">Contents of this page</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#variables">Variables</a></li>
<li><a class="reference internal" href="#affine-expressions">Affine Expressions</a><ul>
<li><a class="reference internal" href="#parameters-as-constant-affine-expressions">Parameters as constant affine expressions</a></li>
<li><a class="reference internal" href="#overloaded-operators">Overloaded operators</a></li>
<li><a class="reference internal" href="#summing-affine-expressions">Summing Affine Expressions</a></li>
<li><a class="reference internal" href="#objective-function">Objective function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#norm-of-an-affine-expression">Norm of an affine Expression</a></li>
<li><a class="reference internal" href="#quadratic-expressions">Quadratic Expressions</a></li>
<li><a class="reference internal" href="#constraints">Constraints</a><ul>
<li><a class="reference internal" href="#linear-in-equalities">Linear (in)equalities</a></li>
<li><a class="reference internal" href="#groupping-constraints">Groupping constraints</a></li>
<li><a class="reference internal" href="#quadratic-constraints">Quadratic constraints</a></li>
<li><a class="reference internal" href="#second-order-cone-constraints">Second Order Cone Constraints</a></li>
<li><a class="reference internal" href="#semidefinite-constraints">Semidefinite Constraints</a></li>
</ul>
</li>
<li><a class="reference internal" href="#write-a-problem-to-a-file">Write a Problem to a file</a></li>
<li><a class="reference internal" href="#solve-a-problem">Solve a Problem</a><ul>
<li><a class="reference internal" href="#a-note-on-dual-variables">A note on dual variables</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="examples.html"
                        title="next chapter">Examples</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tuto.txt"
           rel="nofollow">Show Source</a></li>
  </ul>

  <h3><a href="download.html">Download</a></h3>
  <ul class="this-page-menu">
    <li><a href="dist/PICOS-0.1.2.tar.gz" onClick="javascript: _gaq.push(['_trackPageview', '/downloads/version012']);" onClick="javascript: _gaq.push(['_trackPageview', '/downloads/version012']);">Latest Version (0.1.2)</a></li>
  </ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             >next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             >previous</a> |</li>
        <li><a href="index.html">PICOS</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Guillaume Sagnol.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>